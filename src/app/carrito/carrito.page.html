<ion-header>
  <ion-toolbar color = "warning">
    <ion-segment value = "favorites">
      <ion-segment-button value="all" (click) = "goToDisponibles()" >
          Disponibles
      </ion-segment-button>
      <ion-segment-button  value="favorites">
        <ion-icon name="cart-outline"></ion-icon>
      </ion-segment-button>
    </ion-segment>

    <!-- <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons> -->
    <!-- <ion-title>carrito</ion-title> -->
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item *ngFor= "let prod of carrito" lines = "insert">
      <ion-thumbnail  slot = "start">
        <img style = "border-radius: 20px;" [src]="prod.foto" alt="fotodetalle">
      </ion-thumbnail>
      <p *ngIf = "prod.especial === true">
        {{prod.cantidad}} x {{prod.nombre}} - {{prod.precio | currency: 'CLP':'symbol-narrow'}} = {{prod.cantidad * prod.precio | currency: 'CLP':'symbol-narrow'}} -- ESPECIAL
      </p>
      <p *ngIf = "prod.especial === false">
        {{prod.cantidad}} x {{prod.nombre}} - {{prod.precio | currency: 'CLP':'symbol-narrow'}} = {{prod.cantidad * prod.precio | currency: 'CLP':'symbol-narrow'}} 
      </p>
      
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-button color = "danger" (click) = "quitar(prod)">
              <ion-icon name="trash-outline"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <p style="text-align: center;">Total: <span>{{getTotal() | currency: 'CLP':'symbol-narrow'}}</span></p>
  </ion-list>
  <div class = "center">
    <ion-row>
      <ion-col id = "b"  size = "6"> <ion-button id = "open-modal" color = "success">Confirmar</ion-button></ion-col>
      <ion-col id = "b" size = "6"> <ion-button id = "p" (click) = "remover()">Eliminar</ion-button></ion-col>
    </ion-row>
  </div>

  <ion-modal #modal trigger="open-modal">
    <ng-template>
      <ion-content class="ion-justify-content-center ion-align-items-center">
        <ion-toolbar color="warning">
          <ion-title style="text-align: center;">Realizar pedido</ion-title>
        </ion-toolbar>
        <ion-list *ngFor="let prod of carrito" style="text-align: center;">
          <ion-item>
            <ion-avatar slot="start">
              <ion-img [src]="prod.foto"></ion-img>
            </ion-avatar>
            <ion-label>
              <h2>{{prod.nombre}}</h2>
              <p *ngIf = "prod.especial === true" >{{prod.precio | currency: 'CLP':'symbol-narrow'}} x {{prod.cantidad}} -- ESPECIAL</p>
              <p *ngIf = "prod.especial === false">{{prod.precio | currency: 'CLP':'symbol-narrow'}} x {{prod.cantidad}}</p>
            </ion-label>
          </ion-item>
        </ion-list>
        <h3 style="text-align: center;">Total: <span>{{getTotal() | currency: 'CLP':'symbol-narrow'}}</span></h3>
        <div class="centrado">
          <ion-button class="glow-on-hover" *ngIf="getTotal() != 0" color="success" (click)="checkout()">
            <ion-icon name="logo-whatsapp"></ion-icon>
          </ion-button>
        </div>
        <ion-note>
          <p style="text-align:center;">Presiona fuera de la ventana modal para salir</p>
        </ion-note>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
